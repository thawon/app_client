<div class="wrapper wrapper-content animated fadeInRight">

  <div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-10">
      <h2>{{'starter.header' | translate}}</h2>
      <h4>{{'starter.greeting' | translate}}</h4>
    </div>
  </div>

  <div class="row m-b-lg m-t-lg">
    <div class="col-md-6">

      <div class="profile-image">
        <img src="{{ pictureUrl.value }}" class="rounded-circle circle-border m-b-md" alt="profile">
      </div>
      <div class="profile-info">
        <div class="">
          <div>
            <h2 class="no-margins">
              {{ name.value }}
            </h2>
            <!--<h4><small><b>{{'starter.standardAccount' | translate}}</b></small><span class="badge badge-primary ml-1">{{'starter.beta' | translate}}</span></h4>-->

            <h4>
              <small>
                <b *ngIf="subscription.value.status === system.SUBSCRIPTION_STATUS_TYPE.TRIAL_AVAILABLE
                   || subscription.value.status === system.SUBSCRIPTION_STATUS_TYPE.TRIAL_EXPIRED
                   || subscription.value.status === system.SUBSCRIPTION_STATUS_TYPE.SUBSCRIPTION_EXPIRED">{{'starter.standardAccount' | translate}}</b>
                <b *ngIf="subscription.value.status === system.SUBSCRIPTION_STATUS_TYPE.TRIAL_ACTIVE">TRIAL PREMIUM ACCOUNT</b>
                <b *ngIf="subscription.value.status === system.SUBSCRIPTION_STATUS_TYPE.SUBSCRIPTION_ACTIVE">PREMIUM ACCOUNT</b>
              </small>
            </h4>

            {{'starter.joinedAt' | translate}}: {{ createdAt.value | date:'dd/MM/yyyy' }} <br />
            {{'starter.language' | translate}}: {{ language.value | translate }}
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-7">
      <p *ngIf="subscription.value.status === system.SUBSCRIPTION_STATUS_TYPE.TRIAL_ACTIVE
         || subscription.value.status === system.SUBSCRIPTION_STATUS_TYPE.SUBSCRIPTION_ACTIVE">
        {{'starter.dailyTranslationUsed' | translate}}: <i class="fa fa-star-o"></i><b> Unlimited</b>
      </p>
      <p *ngIf="subscription.value.status === system.SUBSCRIPTION_STATUS_TYPE.TRIAL_AVAILABLE
                   || subscription.value.status === system.SUBSCRIPTION_STATUS_TYPE.TRIAL_EXPIRED
                   || subscription.value.status === system.SUBSCRIPTION_STATUS_TYPE.SUBSCRIPTION_EXPIRED">
        {{'starter.dailyTranslationUsed' | translate}}: {{ charUsed.value }} / {{ this.system.maxDailyCharQuota }} {{'starter.character' | translate}}
      </p>

      <div *ngIf="isStartTrialSuccessfully" class="form-group row animated fadeInRight">
        <div class="col">
          <span class="badge badge-primary"><i class="fa fa-check"></i>You have enabled your trial.</span>
        </div>
      </div>

      <div *ngIf="isCancelSubscriptionSuccessfully" class="form-group row animated fadeInRight">
        <div class="col">
          <span class="badge badge-primary"><i class="fa fa-check"></i>Subscription has been cancelled successfully.</span>
        </div>
      </div>

      <div *ngIf="subscription.value.status !== system.SUBSCRIPTION_STATUS_TYPE.SUBSCRIPTION_ACTIVE">
        <b>
          <span *ngIf="subscription.value.status === system.SUBSCRIPTION_STATUS_TYPE.TRIAL_EXPIRED">Your trial ended on: {{ subscription.value.at | date:'dd/MM/yyyy HH:mm' }}</span>
          <span *ngIf="subscription.value.status === system.SUBSCRIPTION_STATUS_TYPE.TRIAL_ACTIVE">Your trial will end on: {{ subscription.value.at | date:'dd/MM/yyyy HH:mm' }}</span>
          <span *ngIf="subscription.value.status === system.SUBSCRIPTION_STATUS_TYPE.SUBSCRIPTION_EXPIRED">Your subscription is expired on: {{ subscription.value.at | date:'dd/MM/yyyy HH:mm' }}</span>
        </b>
        <br />
        <button type="button" class="btn btn-lg btn-success mt-3"
                (click)="go()">
          <b>
            <span *ngIf="subscription.value.status === system.SUBSCRIPTION_STATUS_TYPE.TRIAL_AVAILABLE">Start Your Free Trial NOW</span>
            <span *ngIf="subscription.value.status === system.SUBSCRIPTION_STATUS_TYPE.TRIAL_EXPIRED">SUBSCRIBE NOW</span>
            <span *ngIf="subscription.value.status === system.SUBSCRIPTION_STATUS_TYPE.TRIAL_ACTIVE">SUBSCRIBE NOW</span>
            <span *ngIf="subscription.value.status === system.SUBSCRIPTION_STATUS_TYPE.SUBSCRIPTION_EXPIRED">RENEW SUBSCRIPTION</span>
          </b>
        </button>
      </div>

      <div *ngIf="subscription.value.status === system.SUBSCRIPTION_STATUS_TYPE.SUBSCRIPTION_ACTIVE && nextBillingAt.value === null">
        <span>Your subscription is expired on: {{ subscription.value.at | date:'dd/MM/yyyy HH:mm' }}</span>
      </div>


    </div>
  </div>

  <div class="row"
       *ngIf="subscription.value.status === system.SUBSCRIPTION_STATUS_TYPE.SUBSCRIPTION_ACTIVE || subscription.value.status === system.SUBSCRIPTION_STATUS_TYPE.SUBSCRIPTION_EXPIRED">
    <div class="col-sm-12 col-lg-5">
      <div class="ibox ">
        <div class="ibox-title">
          <h5>Mangage your subscription</h5>
          <div class="ibox-tools">
            <a class="collapse-link">
              <i class="fa fa-chevron-up"></i>
            </a>
          </div>
        </div>
        <div class="ibox-content">
          <form>
            <div class="form-group row" *ngIf="nextBillingAt.value !== null">
              <label class="col-lg-5 col-form-label">Next billing:</label>

              <div class="col-lg-10 mt-1">
                <span class="form-text">On {{ nextBillingAt.value | date:'dd/MM/yyyy' }} {{ brand.value }}(Last digits {{ lastDigits.value }})</span>
              </div>
            </div>


            <label>Payment History:</label>
            <table class="table table-striped">
              <tbody>
                <tr *ngFor="let receipt of receipts; index as i">
                  <td>
                    {{ receipt.paidAt | date:'dd/MM/yyyy' }}
                  </td>
                  <td>
                    <span>{{ receipt.key }}</span><br />
                    <span>{{ receipt.amount }} {{ receipt.paymentBrand }}(ends: {{ receipt.lastDigits }})</span>
                  </td>
                </tr>                
              </tbody>
            </table>

            <div class="form-group row mt-3"
                 *ngIf="nextBillingAt.value !== null || subscription.value.status !== system.SUBSCRIPTION_STATUS_TYPE.SUBSCRIPTION_EXPIRED">
              <div class="col-lg-offset-2 col-lg-10">
                <button type="button" class="btn btn-lg btn-danger" (click)="openCancelSubscriptionModal()">Cancel Subscription</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-12 col-lg-5">
      <button class="btn btn-lg btn-primary" style="width:100%" type="button">Close
      </button>
    </div>
  </div>

</div>
